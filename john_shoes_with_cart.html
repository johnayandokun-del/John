<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>John Shoes Marketplace — Cart Enabled</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    /* ---------- GLOBAL ---------- */
    :root{
      --primary: #0070f3;
      --muted: #f6f6f6;
      --card-bg: #ffffff;
      --radius: 12px;
    }
    *{box-sizing: border-box}
    body {
      margin: 0;
      font-family: 'Inter', sans-serif;
      background: #fafafa;
      color: #111;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }
    .container { max-width: 1400px; margin: auto; padding: 0 20px; }

    /* ---------- HEADER ---------- */
    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 20px;
      border-bottom: 1px solid #e6e6e6;
      position: sticky;
      top: 0;
      background: white;
      z-index: 1100;
    }
    .left-row{display:flex;align-items:center;gap:20px}
    .logo { font-size: 1.6rem; font-weight: 700; }
    .search-bar input {
      padding: 10px 12px;
      border: 1px solid #ddd;
      border-radius: 8px;
      width: 320px;
      font-size: 0.98rem;
      transition: all .15s ease;
    }
    .search-bar input:focus{ outline:none; box-shadow:0 0 0 3px rgba(0,112,243,0.08); border-color:var(--primary) }

    .auth { display:flex; gap:10px; align-items:center }
    .auth button{ padding:8px 12px; border-radius:8px; border:1px solid #111; background:none; cursor:pointer; font-weight:600}
    .auth .signup{ background:#111; color:#fff }

    /* cart button */
    .cart-btn{ position:relative; display:inline-flex; align-items:center; gap:8px; cursor:pointer; padding:8px; border-radius:8px }
    .cart-count{ position:absolute; top:-6px; right:-6px; background:var(--primary); color:white; font-size:0.75rem; padding:4px 7px; border-radius:999px; font-weight:700 }

    /* ---------- NAV ---------- */
    nav { display:flex; gap:18px; font-weight:600; justify-content:center; background:var(--muted); border-top:1px solid #eee; border-bottom:1px solid #eee; padding:12px; flex-wrap:wrap }
    nav>div{ position:relative; padding:4px 10px }
    nav>div:hover{ color:var(--primary) }
    .dropdown { display:none; position:absolute; top:100%; left:0; background:var(--card-bg); padding:20px; border-radius:10px; box-shadow:0 8px 30px rgba(20,20,20,0.08); min-width:700px; z-index:1000; gap:30px }
    nav>div:hover .dropdown{ display:flex }
    .dropdown-section{ display:flex; flex-direction:column; gap:8px }

    /* ---------- PRODUCTS ---------- */
    .product-grid{ display:grid; grid-template-columns: repeat(auto-fit,minmax(220px,1fr)); gap:26px; padding:36px 20px }
    .product-card{ background:var(--card-bg); border-radius:var(--radius); overflow:hidden; box-shadow:0 2px 8px rgba(10,10,10,0.05); transition:transform .22s ease, box-shadow .22s ease }
    .product-card:hover{ transform:translateY(-6px); box-shadow:0 10px 30px rgba(10,10,10,0.09) }
    .product-card img{ width:100%; height:200px; object-fit:cover; display:block; transition:transform .3s }
    .product-card:hover img{ transform:scale(1.05) }
    .product-info{ padding:12px }
    .product-title{ font-weight:600; font-size:0.98rem }
    .price{ color:#333; margin-top:6px }
    .card-actions{ margin-top:10px; display:flex; gap:10px; align-items:center }
    .btn{ padding:8px 12px; border-radius:8px; border:1px solid #111; cursor:pointer; font-weight:700 }
    .btn.ghost{ background:transparent; text-decoration:none; display:inline-block }
    .btn.primary{ background:var(--primary); color:white; border:none }
    .btn.ghost:hover { text-decoration:none; }

    /* ---------- MODAL (product quick add) ---------- */
    .modal-backdrop{ position:fixed; inset:0; background:rgba(0,0,0,0.35); display:none; align-items:center; justify-content:center; z-index:1200 }
    .modal{ width:420px; max-width:94%; background:white; border-radius:12px; padding:18px; box-shadow:0 10px 40px rgba(10,10,10,0.18) }
    .modal .media{ display:flex; gap:14px }
    .modal img{ width:120px; height:120px; object-fit:cover; border-radius:8px }
    .modal h3{ margin:0 0 6px }
    .field{ margin-top:10px }
    select,input[type=number]{ width:100%; padding:8px 10px; border-radius:8px; border:1px solid #ddd }
    .modal .modal-actions{ display:flex; gap:10px; justify-content:flex-end; margin-top:12px }

    /* ---------- CART DRAWER ---------- */
    .cart-drawer-backdrop{ position:fixed; inset:0; background:rgba(0,0,0,0.2); display:none; z-index:1150 }
    .cart-drawer{ position:fixed; right:0; top:0; height:100vh; width:420px; max-width:100%; background:white; box-shadow:-20px 0 60px rgba(10,10,10,0.08); transform:translateX(110%); transition:transform .28s ease; z-index:1160; display:flex; flex-direction:column }
    .cart-drawer.open{ transform:translateX(0) }
    .cart-header{ padding:18px; border-bottom:1px solid #f0f0f0; display:flex; justify-content:space-between; align-items:center }
    .cart-body{ padding:14px; overflow:auto; flex:1 }
    .cart-item{ display:flex; gap:10px; align-items:center; padding:10px 0; border-bottom:1px dashed #f0f0f0 }
    .cart-item img{ width:70px; height:70px; object-fit:cover; border-radius:8px }
    .cart-item .meta{ flex:1 }
    .cart-item .meta h4{ margin:0; font-size:0.95rem }
    .cart-item .meta small{ color:#666 }
    .qty-controls{ display:flex; gap:6px; align-items:center; margin-top:8px }
    .qty-controls button{ padding:6px 8px; border-radius:8px; border:1px solid #ddd; background:transparent; cursor:pointer }
    .cart-footer{ padding:14px; border-top:1px solid #f0f0f0 }
    .cart-empty{ text-align:center; padding:30px 10px; color:#666 }

    /* ---------- FOOTER ---------- */
    footer{ background:#111; color:#eee; text-align:center; padding:20px; font-size:0.88rem }

    /* ---------- RESPONSIVE ---------- */
    @media (max-width:768px){
      .search-bar input{ width:180px }
      .dropdown{ position:static; min-width:100%; box-shadow:none; border-radius:0 }
      .cart-drawer{ width:100% }
      .modal{ width:360px }
    }
  </style>
</head>
<body>
  <!-- HEADER -->
  <header>
    <div class="left-row">
      <div class="logo">John Shoes</div>
      <div class="search-bar">
        <input id="search" placeholder="Search for brand, color, etc." onkeyup="filterProducts()">
      </div>
    </div>

    <div style="display:flex;align-items:center;gap:14px">
      <div class="auth">
        <button>Login</button>
        <button class="signup">Sign Up</button>
      </div>

      <div class="cart-btn" id="openCartBtn" title="Open cart">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden>
          <path d="M3 3h2l.4 2M7 13h10l3-8H6.4" stroke="#111" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
          <circle cx="10" cy="20" r="1" fill="#111"></circle>
          <circle cx="18" cy="20" r="1" fill="#111"></circle>
        </svg>
        <span>Cart</span>
        <span class="cart-count" id="cartCount">0</span>
      </div>
    </div>
  </header>

  <!-- NAVIGATION BAR -->
  <nav class="container">
    <div>Brands
      <div class="dropdown">
        <div class="dropdown-section">
          <h4>All Brands</h4>
          <a href="#">A B C D E</a>
          <a href="#">F G H I J</a>
          <a href="#">K L M N O</a>
          <a href="#">P Q R S T</a>
          <a href="#">U V W X Y Z</a>
        </div>
        <div class="dropdown-section">
          <h4>Top Brands</h4>
          <a href="#">Nike</a>
          <a href="#">Adidas</a>
          <a href="#">New Balance</a>
          <a href="#">ASICS</a>
          <a href="#">Puma</a>
        </div>
        <div class="dropdown-section">
          <h4>Trending Brands</h4>
          <a href="#">Louis Vuitton</a>
          <a href="#">Gucci</a>
          <a href="#">Balenciaga</a>
          <a href="#">Supreme</a>
          <a href="#">Vans</a>
        </div>
      </div>
    </div>
    <div>Trending
      <div class="dropdown">
        <div class="dropdown-section">
          <h4>Popular Now</h4>
          <a href="#">Jordan 1</a>
          <a href="#">Nike Dunks</a>
          <a href="#">Yeezy</a>
          <a href="#">Crocs</a>
          <a href="#">Converse</a>
        </div>
      </div>
    </div>

    <div>New
      <div class="dropdown">
        <div class="dropdown-section">
          <h4>Latest Drops</h4>
          <a href="#">Sneakers</a>
          <a href="#">Apparel</a>
          <a href="#">Accessories</a>
        </div>
      </div>
    </div>

    <div>Deals
      <div class="dropdown">
        <div class="dropdown-section">
          <h4>Special Offers</h4>
          <a href="#">Under £100</a>
          <a href="#">Clearance</a>
          <a href="#">Bundles</a>
        </div>
      </div>
    </div>

    <div>Men
      <div class="dropdown">
        <div class="dropdown-section">
          <h4>Shoes</h4>
          <a href="#">Sneakers</a>
          <a href="#">Boots</a>
          <a href="#">Running</a>
        </div>
        <div class="dropdown-section">
          <h4>Clothing</h4>
          <a href="#">T-Shirts</a>
          <a href="#">Hoodies</a>
          <a href="#">Jackets</a>
        </div>
      </div>
    </div>

    <div>Women
      <div class="dropdown">
        <div class="dropdown-section">
          <h4>Shoes</h4>
          <a href="#">Sneakers</a>
          <a href="#">Heels</a>
          <a href="#">Running</a>
        </div>
        <div class="dropdown-section">
          <h4>Clothing</h4>
          <a href="#">Tops</a>
          <a href="#">Dresses</a>
          <a href="#">Jackets</a>
        </div>
      </div>
    </div>

    <div>Kids
      <div class="dropdown">
        <div class="dropdown-section">
          <h4>Boys</h4>
          <a href="#">Shoes</a>
          <a href="#">Apparel</a>
        </div>
        <div class="dropdown-section">
          <h4>Girls</h4>
          <a href="#">Shoes</a>
          <a href="#">Apparel</a>
        </div>
      </div>
    </div>
  </nav>

  <!-- PRODUCT GRID -->
  <div class="product-grid container" id="productGrid"></div>

  <!-- FOOTER -->
  <footer>
    © 2025 John Shoes | All Rights Reserved
  </footer>

  <!-- ---------- ADD TO CART MODAL ---------- -->
  <div class="modal-backdrop" id="modalBackdrop">
    <div class="modal">
      <button id="closeModalBtn" style="float:right;">&times;</button>
      <div class="media">
        <img id="modalImg" src="" alt="Product">
        <div style="flex:1; padding-left:12px">
          <h3 id="modalName"></h3>
          <div id="modalPrice" style="margin:6px 0; font-weight:600;"></div>
          <div class="field">
            <label for="sizeSelect">Size:</label>
            <select id="sizeSelect">
              <option value="">Select size</option>
              <option value="UK 6">UK 6</option>
              <option value="UK 7">UK 7</option>
              <option value="UK 8">UK 8</option>
              <option value="UK 9">UK 9</option>
              <option value="UK 10">UK 10</option>
            </select>
          </div>
          <div class="field">
            <label for="qtyInput">Quantity:</label>
            <input type="number" id="qtyInput" min="1" value="1">
          </div>
        </div>
      </div>
      <div class="modal-actions">
        <button class="btn primary" id="confirmAdd">Add to Cart</button>
        <button class="btn ghost" id="cancelAdd">Cancel</button>
      </div>
    </div>
  </div>

  <!-- ---------- PRODUCTS & ADD TO CART SCRIPT ---------- -->
  <script>
    const products = [
      { id: 1, name: "ASICS GEL-101 Runner", price: "£89.99", brand: "asics", img: "https://atrieve.com/cdn/shop/files/1_a9bc1751-0261-4da7-b311-5c8d060f0344_1800x1800.webp?v=1755792509", page: "Asics gel.html" },
      { id: 2, name: "Nike Air Force 1", price: "£99.99", brand: "nike", img: "https://i8.amplience.net/i/jpl/jd_030664_a?qlt=92&w=950&h=673&v=1&fmt=auto", page: "nike-air-force-1.html" },
      { id: 3, name: "Nike P-6000", price: "£110.00", brand: "nike", img: "https://i8.amplience.net/i/jpl/jd_689134_a?qlt=92&w=950&h=673&v=1&fmt=auto", page: "nike-p6000.html" },
      { id: 4, name: "Adidas Ultraboost", price: "£120.00", brand: "adidas", img: "https://startfitness.co.uk/cdn/shop/files/adidas-ultra-boost-22-mens-running-shoes-navy-29597395452112.jpg?v=1742397549&width=990", page: "adidas-ultraboost.html" },
      { id: 5, name: "Adidas Samba", price: "£85.00", brand: "adidas", img: "https://encrypted-tbn1.gstatic.com/shopping?q=tbn:ANd9GcSNwmFPsUU0ZjCkMwUUh94l7k-g38QxT4RQYKgOUiquan85KXZopChyXm9QkRH43chWjR5V5Fq6vr3rbaie5Z9uMnkq_Zc7RmtdQ2tUit-30vNzcqYeJeKz3Ig&usqp=CAc", page: "adidas-samba.html" },
      { id: 6, name: "New Balance 550", price: "£130.00", brand: "newbalance", img: "https://nb.scene7.com/is/image/NB/bb550pb1_nb_02_i?$dw_detail_main_lg$&bgc=f1f1f1&layer=1&bgcolor=f1f1f1&blendMode=mult&scale=10&wid=1600&hei=1600", page: "newbalance-550.html" },
      { id: 7, name: "Puma Suede Classic", price: "£70.00", brand: "puma", img: "https://www.80scasualclassics.co.uk/images/puma-palermo-trainers-dark-myrtle-warm-white-p26528-132205_medium.jpg", page: "puma-suede-classic.html" },
      { id: 8, name: "ASICS GEL-200 Cushion", price: "£99.99", brand: "asics", img: "https://cdn11.bigcommerce.com/s-21x65e8kfn/images/stencil/original/products/72441/366468/ASI15139_1000_1__91377.1726208325.jpg", page: "asics-gel-200.html" },
      { id: 9, name: "Nike Air Force 1 '07", price: "£95.00", brand: "nike", img: "https://static.nike.com/a/images/t_PDP_1728_v1/f_auto,q_auto:eco/fc4622c4-2769-4665-aa6e-42c974a7705e/AIR+FORCE+1+%2707.png", page: "Air force 1.html" }
    ];

    const productGrid = document.getElementById('productGrid');
    const cartCount = document.getElementById('cartCount');

    const modalBackdrop = document.getElementById('modalBackdrop');
    const modalImg = document.getElementById('modalImg');
    const modalName = document.getElementById('modalName');
    const modalPrice = document.getElementById('modalPrice');
    const sizeSelect = document.getElementById('sizeSelect');
    const qtyInput = document.getElementById('qtyInput');

    const STORAGE_KEY = 'johnShoesCart_v1';
    let activeProduct = null;

    function getCart(){ 
      try{ return JSON.parse(localStorage.getItem(STORAGE_KEY)) || [] } 
      catch(e){ return [] } 
    }
    function saveCart(cart){ localStorage.setItem(STORAGE_KEY, JSON.stringify(cart)) }
    function updateCartCount(){ cartCount.textContent = getCart().length }

    function renderProducts(filter = ''){
      const query = filter.toLowerCase();
      productGrid.innerHTML = '';
      const filtered = products.filter(p => p.name.toLowerCase().includes(query) || p.brand.toLowerCase().includes(query));

      filtered.forEach(p => {
        const card = document.createElement('div');
        card.className = 'product-card';
        card.innerHTML = `
          <img src="${p.img}" alt="${p.name}">
          <div class="product-info">
            <div class="product-title">${p.name}</div>
            <div class="price">${p.price}</div>
            <div class="card-actions">
              <a class="btn ghost" href="${p.page}">View</a>
              <button class="btn primary" data-add="${p.id}">Add to cart</button>
            </div>
          </div>
        `;
        productGrid.appendChild(card);
      });
    }

    function openAddModal(productId){
      const product = products.find(p => p.id === productId);
      if(!product) return;
      activeProduct = product;
      modalImg.src = product.img;
      modalName.textContent = product.name;
      modalPrice.textContent = product.price;
      sizeSelect.value = '';
      qtyInput.value = 1;
      modalBackdrop.style.display = 'flex';
    }

    function closeModal(){ modalBackdrop.style.display = 'none'; activeProduct = null }

    function addToCart(product, size, qty){
      if(!size){ alert('Please select a size'); return; }
      const cart = getCart();
      cart.push({...product, size, qty});
      saveCart(cart);
      updateCartCount();
      alert(`Added ${product.name} (Size: ${size}, Qty: ${qty}) to cart`);
    }

    function filterProducts(){ const q = document.getElementById('search').value; renderProducts(q) }

    document.addEventListener('click', (e) => {
      const addBtn = e.target.closest('[data-add]');
      if(addBtn){
        const id = parseInt(addBtn.getAttribute('data-add'),10);
        openAddModal(id);
        return;
      }

      if(e.target.matches('#confirmAdd')){
        const size = sizeSelect.value;
        const qty = Math.max(1, parseInt(qtyInput.value||'1',10));
        addToCart(activeProduct, size, qty);
        closeModal();
        return;
      }

      if(e.target.matches('#cancelAdd') || e.target.matches('#closeModalBtn')){
        closeModal();
        return;
      }
    });

    renderProducts();
    updateCartCount();
  </script>
<!-- CART DRAWER BACKDROP -->
<div class="cart-drawer-backdrop" id="cartBackdrop"></div>

<!-- CART DRAWER -->
<div class="cart-drawer" id="cartDrawer">
  <div class="cart-header">
    <h3>Your Cart</h3>
    <button id="closeCartBtn">&times;</button>
  </div>
  <div class="cart-body" id="cartBody">
    <p class="cart-empty">Your cart is empty</p>
  </div>
  <div class="cart-footer">
    <strong>Total Items: <span id="totalItems">0</span></strong>
  </div>
</div>

<script>
  // --- CART DRAWER SCRIPT ---
  const cartDrawer = document.getElementById('cartDrawer');
  const cartBackdrop = document.getElementById('cartBackdrop');
  const cartBody = document.getElementById('cartBody');
  const totalItemsEl = document.getElementById('totalItems');
  const openCartBtn = document.getElementById('openCartBtn');
  const closeCartBtn = document.getElementById('closeCartBtn');

  function renderCart(){
    const cart = getCart();
    cartBody.innerHTML = '';
    if(cart.length === 0){
      cartBody.innerHTML = '<p class="cart-empty">Your cart is empty</p>';
    } else {
      cart.forEach((item, index) => {
        const div = document.createElement('div');
        div.className = 'cart-item';
        div.innerHTML = `
          <img src="${item.img}" alt="${item.name}">
          <div class="meta">
            <h4>${item.name}</h4>
            <small>Size: ${item.size} | Qty: ${item.qty}</small>
            <div class="qty-controls">
              <button data-remove="${index}">Remove</button>
            </div>
          </div>
        `;
        cartBody.appendChild(div);
      });
    }
    totalItemsEl.textContent = cart.length;
  }

  function openCart(){
    renderCart();
    cartDrawer.classList.add('open');
    cartBackdrop.style.display = 'block';
  }

  function closeCart(){
    cartDrawer.classList.remove('open');
    cartBackdrop.style.display = 'none';
  }

  openCartBtn.addEventListener('click', openCart);
  closeCartBtn.addEventListener('click', closeCart);
  cartBackdrop.addEventListener('click', closeCart);

  // Remove item functionality
  cartBody.addEventListener('click', (e) => {
    const btn = e.target.closest('[data-remove]');
    if(btn){
      const index = parseInt(btn.getAttribute('data-remove'), 10);
      const cart = getCart();
      cart.splice(index, 1);
      saveCart(cart);
      renderCart();
      updateCartCount();
    }
  });

  // Open cart automatically when adding new item
  const originalAddToCart = addToCart;
  addToCart = function(product, size, qty){
    originalAddToCart(product, size, qty);
    openCart();
  }
</script>
</body>
</html>
